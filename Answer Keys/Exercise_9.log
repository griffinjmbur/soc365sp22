-----------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/sarahelizabethfarr/Box/Academic/Teaching/Soc 365 Spring21/Soc365/Class and exercises/Do/Exercise_9.log
  log type:  text
 opened on:  26 Feb 2021, 08:23:12

. 
. *FILE:    Exercise_9.do
. *PURPOSE: Answer key to Exercise 9
. 
. 
. *This should be the path to your Original data folder, where you have saved the raw data file you just created.
. cd "/Users/sarahelizabethfarr/Box/Academic/Teaching/Soc 365 Spring21/Soc365/Class and exercises/Original data"
/Users/sarahelizabethfarr/Box/Academic/Teaching/Soc 365 Spring21/Soc365/Class and exercises/Original data

. 
. 
. use psid_extract.dta, clear

. describe //I can see this data is in a "wide" format

Contains data from psid_extract.dta
  obs:         9,283                          
 vars:            23                          11 Apr 2014 12:11
-----------------------------------------------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-----------------------------------------------------------------------------------------------------------------------------------
fid             int     %9.0g                 PSID family id
wfpid           int     %9.0g                 PSID wife's person id
hdpid           int     %9.0g                 PSID head's person id
wedy1970        byte    %9.0g                 1970 wedy
hedy1970        byte    %9.0g                 1970 hedy
wedc1970        byte    %9.0g      edc        1970 wedc
hedc1970        byte    %9.0g      edc        1970 hedc
wedy1980        byte    %9.0g                 1980 wedy
hedy1980        byte    %9.0g                 1980 hedy
wedc1980        byte    %9.0g      edc        1980 wedc
hedc1980        byte    %9.0g      edc        1980 hedc
wedy1990        byte    %9.0g                 1990 wedy
hedy1990        byte    %9.0g                 1990 hedy
wedc1990        byte    %9.0g      edc        1990 wedc
hedc1990        byte    %9.0g      edc        1990 hedc
wedy2001        byte    %9.0g                 2001 wedy
hedy2001        byte    %9.0g                 2001 hedy
wedc2001        byte    %9.0g      edc        2001 wedc
hedc2001        byte    %9.0g      edc        2001 hedc
wedy2009        byte    %9.0g                 2009 wedy
hedy2009        byte    %9.0g                 2009 hedy
wedc2009        byte    %9.0g      edc        2009 wedc
hedc2009        byte    %9.0g      edc        2009 hedc
-----------------------------------------------------------------------------------------------------------------------------------
Sorted by: fid  wfpid  hdpid

. 
. 
. **************
. * QUESTION 2 *
. **************
. 
.         *Reshape from wide to long
.         reshape long wedy hedy wedc hedc, i(fid wfpid hdpid) j(year)
(note: j = 1970 1980 1990 2001 2009)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                     9283   ->   46415
Number of variables                  23   ->       8
j variable (5 values)                     ->   year
xij variables:
         wedy1970 wedy1980 ... wedy2009   ->   wedy
         hedy1970 hedy1980 ... hedy2009   ->   hedy
         wedc1970 wedc1980 ... wedc2009   ->   wedc
         hedc1970 hedc1980 ... hedc2009   ->   hedc
-----------------------------------------------------------------------------

. 
.         *Generate college dummy
.         gen hcoll = (hedc == 4) if hedc != .
(29,536 missing values generated)

.         gen wcoll = (wedc == 4) if wedc != .
(29,640 missing values generated)

. 
. 
.         *Check -- it works
.         tab hedc hcoll, miss

    Husb's |
  4-cat ed |
   <12,12, |              hcoll
 13-15,16+ |         0          1          . |     Total
-----------+---------------------------------+----------
     1:<12 |     3,865          0          0 |     3,865 
      2:12 |     5,931          0          0 |     5,931 
   3:13-15 |     3,243          0          0 |     3,243 
     4:16+ |         0      3,840          0 |     3,840 
         . |         0          0     29,536 |    29,536 
-----------+---------------------------------+----------
     Total |    13,039      3,840     29,536 |    46,415 

.         tab wedc wcoll, miss

    Wife's |
  4-cat ed |
   <12,12, |              wcoll
 13-15,16+ |         0          1          . |     Total
-----------+---------------------------------+----------
     1:<12 |     3,268          0          0 |     3,268 
      2:12 |     6,930          0          0 |     6,930 
   3:13-15 |     3,411          0          0 |     3,411 
     4:16+ |         0      3,166          0 |     3,166 
         . |         0          0     29,640 |    29,640 
-----------+---------------------------------+----------
     Total |    13,609      3,166     29,640 |    46,415 

. 
. 
.         *How much has college completion for husbands changed between 1970 and 2009?
.         tab year hcol, row

+----------------+
| Key            |
|----------------|
|   frequency    |
| row percentage |
+----------------+

      PSID |
    survey |         hcoll
      year |         0          1 |     Total
-----------+----------------------+----------
      1970 |     2,306        364 |     2,670 
           |     86.37      13.63 |    100.00 
-----------+----------------------+----------
      1980 |     3,027        589 |     3,616 
           |     83.71      16.29 |    100.00 
-----------+----------------------+----------
      1990 |     2,865        891 |     3,756 
           |     76.28      23.72 |    100.00 
-----------+----------------------+----------
      2001 |     2,349        907 |     3,256 
           |     72.14      27.86 |    100.00 
-----------+----------------------+----------
      2009 |     2,492      1,089 |     3,581 
           |     69.59      30.41 |    100.00 
-----------+----------------------+----------
     Total |    13,039      3,840 |    16,879 
           |     77.25      22.75 |    100.00 

. 
.         *College completion for husbands has more than doubled between 1970-2009 (from
.         *about 14% to 30%).
. 
. 
. **************
. * QUESTION 3 *
. **************
. 
.         *Relative education variable
.         gen     rel_edc = 2 if (hedc > wedc & hedc != . )
(42,425 missing values generated)

.         replace rel_edc = 1 if (hedc < wedc & wedc != . )
(3,750 real changes made)

.         replace rel_edc = 0 if (hedc == wedc & wedc != . )
(8,828 real changes made)

. 
.  
.         *Check -- it works
.         bysort rel_edc: tab hedc wedc, miss

-----------------------------------------------------------------------------------------------------------------------------------
-> rel_edc = 0

    Husb's |
  4-cat ed |
   <12,12, |      Wife's 4-cat ed <12,12, 13-15,16+
 13-15,16+ |     1:<12       2:12    3:13-15      4:16+ |     Total
-----------+--------------------------------------------+----------
     1:<12 |     2,148          0          0          0 |     2,148 
      2:12 |         0      3,496          0          0 |     3,496 
   3:13-15 |         0          0      1,109          0 |     1,109 
     4:16+ |         0          0          0      2,075 |     2,075 
-----------+--------------------------------------------+----------
     Total |     2,148      3,496      1,109      2,075 |     8,828 

-----------------------------------------------------------------------------------------------------------------------------------
-> rel_edc = 1

    Husb's |
  4-cat ed |     Wife's 4-cat ed <12,12,
   <12,12, |            13-15,16+
 13-15,16+ |      2:12    3:13-15      4:16+ |     Total
-----------+---------------------------------+----------
     1:<12 |     1,355        234         71 |     1,660 
      2:12 |         0      1,114        396 |     1,510 
   3:13-15 |         0          0        580 |       580 
-----------+---------------------------------+----------
     Total |     1,355      1,348      1,047 |     3,750 

-----------------------------------------------------------------------------------------------------------------------------------
-> rel_edc = 2

    Husb's |
  4-cat ed |     Wife's 4-cat ed <12,12,
   <12,12, |            13-15,16+
 13-15,16+ |     1:<12       2:12    3:13-15 |     Total
-----------+---------------------------------+----------
      2:12 |       830          0          0 |       830 
   3:13-15 |       174      1,300          0 |     1,474 
     4:16+ |        58        725        903 |     1,686 
-----------+---------------------------------+----------
     Total |     1,062      2,025        903 |     3,990 

-----------------------------------------------------------------------------------------------------------------------------------
-> rel_edc = .

    Husb's |
  4-cat ed |
   <12,12, |           Wife's 4-cat ed <12,12, 13-15,16+
 13-15,16+ |     1:<12       2:12    3:13-15      4:16+          . |     Total
-----------+-------------------------------------------------------+----------
     1:<12 |         0          0          0          0         57 |        57 
      2:12 |         0          0          0          0         95 |        95 
   3:13-15 |         0          0          0          0         80 |        80 
     4:16+ |         0          0          0          0         79 |        79 
         . |        58         54         51         44     29,329 |    29,536 
-----------+-------------------------------------------------------+----------
     Total |        58         54         51         44     29,640 |    29,847 


.         sort fid

.         list rel_edc hedc wedc in 1/50

     +---------------------------+
     | rel_edc    hedc      wedc |
     |---------------------------|
  1. |       0    2:12      2:12 |
  2. |       .       .         . |
  3. |       .       .         . |
  4. |       .       .         . |
  5. |       .       .         . |
     |---------------------------|
  6. |       0   1:<12     1:<12 |
  7. |       .       .         . |
  8. |       .       .         . |
  9. |       .       .         . |
 10. |       .       .         . |
     |---------------------------|
 11. |       .       .         . |
 12. |       .       .         . |
 13. |       .       .         . |
 14. |       .       .         . |
 15. |       .       .         . |
     |---------------------------|
 16. |       .       .         . |
 17. |       .       .         . |
 18. |       .       .         . |
 19. |       .       .         . |
 20. |       .       .         . |
     |---------------------------|
 21. |       0   1:<12     1:<12 |
 22. |       .       .         . |
 23. |       .       .         . |
 24. |       1   1:<12      2:12 |
 25. |       .       .         . |
     |---------------------------|
 26. |       0   1:<12     1:<12 |
 27. |       0   1:<12     1:<12 |
 28. |       .       .         . |
 29. |       2    2:12     1:<12 |
 30. |       .       .         . |
     |---------------------------|
 31. |       2   4:16+      2:12 |
 32. |       .       .         . |
 33. |       1    2:12   3:13-15 |
 34. |       .       .         . |
 35. |       .       .         . |
     |---------------------------|
 36. |       0   1:<12     1:<12 |
 37. |       0   1:<12     1:<12 |
 38. |       .       .         . |
 39. |       .       .         . |
 40. |       .       .         . |
     |---------------------------|
 41. |       .       .         . |
 42. |       0    2:12      2:12 |
 43. |       2    2:12     1:<12 |
 44. |       0   1:<12     1:<12 |
 45. |       2   4:16+      2:12 |
     |---------------------------|
 46. |       .       .         . |
 47. |       .       .         . |
 48. |       .       .         . |
 49. |       0   1:<12     1:<12 |
 50. |       .       .         . |
     +---------------------------+

.  
.         *label variable and values
.         lab var rel_edc "Relative Education, Couples"

.         lab def rel_edc_lbl 2 "2:Hedc>Wedc" 1 "1:Hedc<Wedc" 0 "0:Hedc=Wedc"

.         lab val rel_edc rel_edc_lbl

.  
.  
. **************
. * QUESTION 4 *
. **************
. 
.         tab year rel_edc, row nof

      PSID |
    survey |   Relative Education, Couples
      year | 0:Hedc=We  1:Hedc<We  2:Hedc>We |     Total
-----------+---------------------------------+----------
      1970 |     58.95      18.46      22.60 |    100.00 
      1980 |     55.48      20.25      24.27 |    100.00 
      1990 |     50.80      22.80      26.39 |    100.00 
      2001 |     51.50      23.99      24.50 |    100.00 
      2009 |     50.92      26.94      22.14 |    100.00 
-----------+---------------------------------+----------
     Total |     53.28      22.63      24.08 |    100.00 

. 
.  
.         *A smaller proportion of couples have the same education level and there is a
.         *larger proportion of couples in which wives have more education than their 
.         *husbands. The proportion of couples in which husbands have more education 
.         *than wives has stayed relatively constant. 
. 
. 
. **************
. * QUESTION 5 *
. **************
.  
.         collapse hedy, by(rel_edc year)

.  
.         list

     +-------------------------------+
     | year       rel_edc       hedy |
     |-------------------------------|
  1. | 1970   0:Hedc=Wedc   9.903514 |
  2. | 1980   0:Hedc=Wedc   11.35996 |
  3. | 1990   0:Hedc=Wedc   12.57067 |
  4. | 2001   0:Hedc=Wedc   13.36104 |
  5. | 2009   0:Hedc=Wedc   13.85103 |
     |-------------------------------|
  6. | 1970   1:Hedc<Wedc   9.534694 |
  7. | 1980   1:Hedc<Wedc   10.41177 |
  8. | 1990   1:Hedc<Wedc   11.13513 |
  9. | 2001   1:Hedc<Wedc   11.71105 |
 10. | 2009   1:Hedc<Wedc   11.98166 |
     |-------------------------------|
 11. | 1970   2:Hedc>Wedc   14.09167 |
 12. | 1980   2:Hedc>Wedc   13.99886 |
 13. | 1990   2:Hedc>Wedc   14.51777 |
 14. | 2001   2:Hedc>Wedc   14.71578 |
 15. | 2009   2:Hedc>Wedc   14.85564 |
     |-------------------------------|
 16. | 1970             .        9.2 |
 17. | 1980             .   10.33333 |
 18. | 1990             .       12.5 |
 19. | 2001             .   13.20635 |
 20. | 2009             .   13.40714 |
     +-------------------------------+

.  
.         *Husbands in couples where husbands have more education than wives have the
.         *highest years of schooling, followed by those that have equal levels of 
.         *schooling, and then by those who have less than their wives. It looks like
.         *husbands' years of schooling increased fastest among couples who shared the
.         *same education and slowest for couples where husbands had more education than
.         *wives.
.  
.         log close
      name:  <unnamed>
       log:  /Users/sarahelizabethfarr/Box/Academic/Teaching/Soc 365 Spring21/Soc365/Class and exercises/Do/Exercise_9.log
  log type:  text
 closed on:  26 Feb 2021, 08:23:12
-----------------------------------------------------------------------------------------------------------------------------------
